@using CollectionApp.Models
@model CollectionApp.ViewModels.CollectionsControllerViewModel
@{
    ViewBag.Title = "Collections";
}
<script language="JavaScript">
    function toggle(source) {
        var checkboxes = document.querySelectorAll('input[type="checkbox"][name="Id"]');
        for (var i = 0; i < checkboxes.length; i++) {
            if (checkboxes[i] != source)
                checkboxes[i].checked = source.checked;
        }
    }
</script>
<input type="checkbox" onClick="toggle(this)" /> Check all?
<br />
<form asp-controller="Collections" asp-action="Functions" method="post">
    <input type="submit" name="Delete" value="Delete" />
    <table class="table">
        <tr>
        <th><a asp-action="Index" asp-controller="Collections" asp-route-username="@Model.UserName" asp-route-sortOrder="@ViewBag.IdSort">Id</a></th>
        <th><a asp-action="Index" asp-controller="Collections" asp-route-username="@Model.UserName" asp-route-sortOrder="@ViewBag.NameSort">Collection Name</a></th>
        <td>Creation Date</td>
        <td>Likes</td>
        <td></td></tr>
        @foreach (var collection in Model.Collections)
        {
            if (collection.UserName == Model.UserName)
            {
    <tr>
        <td><input type="checkbox" name="Id" value="@collection.Id" /></td>
        <td>@collection.Id</td>
        <td><a asp-controller="Collections" asp-route-id="@collection.Id" asp-action="Collection">@collection.CollectionName</a></td>
        <td>@collection.CreationDate</td>
        <td>@collection.Likes</td>
        <td>@collection.ItemCount</td>
        <td><a asp-controller="Collections" asp-route-id="@collection.Id" asp-action="Edit">Edit</a></td>
        <td>
            @if (collection.Image != null)
            {
                <img style='width:80px; height:60px;' src="data:image/jpeg;base64,@(Convert.ToBase64String(collection.Image))" />
            }
        </td>

    </tr>
            }
        }
    </table>
</form>
    <a asp-controller="Collections" asp-route-username="@Model.UserName" asp-action="Create">Create</a>
